<!DOCTYPE html>
<html lang="en">
	<head>
		<title>three.js webgl - collada teapot</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style>
			body {
				background-color: black;
				margin: 0px;
				overflow: hidden;

			}
			#videoElement {
					width: 1000px;
					height: 750px;
					z-index:-1;
					left: 0px;
					top: 0px;
					position:absolute;
			}
		</style>

	</head>
	<body>
		<script src="three.min.js" type="text/javascript"></script>
		<script src="ColladaLoader.js" type="text/javascript"></script>
		<script>

                       function changeX(distance) {
                               camera.position.x += distance;
                       }

                       function changeY(distance) {
                               camera.position.y += distance;
                       }

                       function changeZ(distance) {
                               camera.position.z += distance;
                       }

                       function angleX(radians) {
			       					 		camera.rotation.x += radians
                       }

		       function angleY(radians) {
			       camera.rotation.y += radians
		       }

		       function angleZ(radians) {
			       camera.rotation.z += radians
                       }
						function getLocation(){
							return camera.position
						}

//			var container, stats;

			var camera, scene, renderer, objects;
			var particleLight;
			var dae;

			var loader = new THREE.ColladaLoader();
			loader.options.convertUpAxis = true;
			loader.load( '%s', function ( collada ) {

				dae = collada.scene;

				dae.traverse( function ( child ) {

					if ( child instanceof THREE.SkinnedMesh ) {

						var animation = new THREE.Animation( child, child.geometry.animation );
						animation.play();

					}

				} );

				dae.scale.x = dae.scale.y = dae.scale.z = 0.0002;
				dae.updateMatrix();

				init();
				animate();

			} );

			function init() {

				container = document.createElement( 'div' );
				document.body.appendChild( container );

				camera = new THREE.PerspectiveCamera( 2, window.innerWidth / window.innerHeight, 1, 2000 );

				scene = new THREE.Scene();

				// Add the COLLADA
				dae.resize(1)
				dae.position.set(%f, %f, %f);
				scene.add( dae );

				particleLight = new THREE.Mesh( new THREE.SphereGeometry( 8, 8, 8 ), new THREE.MeshBasicMaterial( { color: 0xff0000 } ) );
				scene.add( particleLight );

				// Lights

				scene.add( new THREE.AmbientLight( 0x888888 ) );

				var pointLight = new THREE.PointLight( 0xffffff, 2 );
				particleLight.add( pointLight );

				renderer = new THREE.WebGLRenderer({alpha:true});
				renderer.setSize( window.innerWidth, window.innerHeight );

				container.appendChild( renderer.domElement );

				window.addEventListener( 'resize',
				onWindowResize, false );

        camera.position.set(%f, %f, %f);
				//camera.lookAt(new THREE.Vector3(0,0,0));
				camera.rotation.x = %f;
				camera.rotation.y = %f;
				camera.rotation.z = %f;
				camera.lookAt(dae.position);
			}

			function onWindowResize() {

				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();

				renderer.setSize( window.innerWidth, window.innerHeight );
			}

			function animate() {

				requestAnimationFrame( animate );

				render();

			}

			var clock = new THREE.Clock();

			function render() {

				var timer = Date.now() * 0.0005;

				particleLight.position.x = Math.sin( timer * 4 ) * 3009;
				particleLight.position.y = Math.cos( timer * 5 ) * 4000;
				particleLight.position.z = Math.cos( timer * 4 ) * 3009;

	//			particleLight.position.x = 100.0;
		//		particleLight.position.y = 100.0;
			//	particleLight.position.z = 20.0;

				THREE.AnimationHandler.update( clock.getDelta() );

				renderer.render( scene, camera );

			}

		</script>

		<div id="container">
				<video autoplay="true" id="videoElement">

				</video>
		</div>


		<script>
				var video = document.querySelector("#videoElement");
				navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia || navigator.oGetUserMedia;

				if (navigator.getUserMedia) {
						navigator.getUserMedia({video: true}, handleVideo, videoError);
				}

				function handleVideo(stream) {
						video.src = window.URL.createObjectURL(stream);
				}

				function videoError(e) {
						// do something
				}
		<button onclick="changeX(0.01)"> + X </button>
		<button onclick="changeX(-.01)"> - X </button>
		<button onclick="changeY(0.2)"> + Y </button>
		<button onclick="changeY(-.2)"> - Y </button>
		<button onclick="changeZ(0.01)"> + Z </button>
		<button onclick="changeZ(-.01)"> - Z </button>
		<button onclick="angleX(0.005)"> + @X </button>
		<button onclick="angleX(-.005)"> - @X </button>
		<button onclick="angleY(0.005)"> + @Y </button>
		<button onclick="angleY(-.005)"> - @Y </button>
		<button onclick="angleZ(0.05)"> + @Z </button>
		<button onclick="angleZ(-.05)"> - @Z </button>

	</body>
</html>
